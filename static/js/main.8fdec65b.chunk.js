(this["webpackJsonpapk-chain"]=this["webpackJsonpapk-chain"]||[]).push([[0],{1014:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(24),l=n.n(o),s=(n(415),n(401));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(1012),n(1013);l.a.render(r.a.createElement(s.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},121:function(e,t,n){"use strict";var a,r=n(407),o=n.n(r);try{a=new o.a(window.web3.currentProvider)}catch(l){window.alert("You haven't configured the crypto wallet app of Ethereum, Please get the Metamask add-on first and sign up/log in the MetaMask account.")}t.a=a},153:function(e,t,n){"use strict";var a=n(121);t.a=new a.a.eth.Contract([{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"string",name:"name_ver",type:"string"},{indexed:!1,internalType:"string",name:"fileHash",type:"string"},{indexed:!1,internalType:"address",name:"customer",type:"address"},{indexed:!1,internalType:"uint256",name:"version",type:"uint256"}],name:"store",type:"event"},{constant:!0,inputs:[{internalType:"string",name:"name",type:"string"},{internalType:"uint256",name:"version",type:"uint256"}],name:"getAppHash",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"string",name:"x",type:"string"},{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"sha1",type:"string"}],name:"storeApp",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"}],"0xb9B591D8FA6bD901C273b1ef4FF564C286C3064b")},205:function(e,t){},231:function(e,t,n){"use strict";var a=new(n(707))({host:"ipfs.infura.io",port:5001,protocol:"https"});t.a=a},401:function(e,t,n){"use strict";(function(e){var a=n(9),r=n.n(a),o=n(402),l=n(403),s=n(408),i=n(404),c=n(409),u=n(1),p=n.n(u),d=n(82),h=n(1015),m=(n(498),n(121)),f=n(231),y=n(153);("undefined"==typeof Crypto||!Crypto.util)&&function(){var e,t=(e=window.self.Crypto={}).util={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&t.rotl(e,8)|4278255360&t.rotl(e,24);for(var n=0;n<e.length;n++)e[n]=t.endian(e[n]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,a=0;n<e.length;n++,a+=8)t[a>>>5]|=e[n]<<24-a%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){if("function"==typeof btoa)return btoa(n.bytesToString(e));for(var t=[],a=0;a<e.length;a+=3)for(var r=e[a]<<16|e[a+1]<<8|e[a+2],o=0;o<4;o++)8*a+6*o<=8*e.length?t.push("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>>6*(3-o)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){if("function"==typeof atob)return n.stringToBytes(atob(e));e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],a=0,r=0;a<e.length;r=++a%4)0!=r&&t.push(("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(a-1))&Math.pow(2,-2*r+8)-1)<<2*r|"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(a))>>>6-2*r);return t}};(e=e.charenc={}).UTF8={stringToBytes:function(e){return n.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(n.bytesToString(e)))}};var n=e.Binary={stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}}();var g="";function b(e){var t=[1732584193,-271733879,-1732584194,271733878,-1009589776],n=function(e,t){for(var n=[],a=t[0],r=t[1],o=t[2],l=t[3],s=t[4],i=0;i<e.length;i+=16){for(var c=a,u=r,p=o,d=l,h=s,m=0;m<80;m++){if(m<16)n[m]=0|e[i+m];else{var f=n[m-3]^n[m-8]^n[m-14]^n[m-16];n[m]=f<<1|f>>>31}var y,g;m<20?(y=r&o|~r&l,g=1518500249):m<40?(y=r^o^l,g=1859775393):m<60?(y=r&o|r&l|o&l,g=-1894007588):(y=r^o^l,g=-899497514);var b=(a<<5|a>>>27)+s+(n[m]>>>0)+y+g;s=l,l=o,o=r<<30|r>>>2,r=a,a=b}a=a+c|0,r=r+u|0,o=o+p|0,l=l+d|0,s=s+h|0}return[a,r,o,l,s]};if(!("undefined"!=typeof File&&(File.prototype.slice||(File.prototype.webkitSlice?File.prototype.slice=File.prototype.webkitSlice:File.prototype.mozSlice&&(File.prototype.slice=File.prototype.mozSlice)),window.File&&window.FileReader&&window.FileList&&window.Blob&&File.prototype.slice)))return!1;!function e(a,r,o){var l=Math.min(o,a.size),s=r,i=new FileReader;i.onload=function(){a.sha1_progress=100*l/a.size;var r,o,i,c,u=u||window.event,p=u.result||u.target.result,d=Crypto.util.bytesToWords(new Uint8Array(p));l===a.size?(r=8*a.size,o=8*(l-s),i=Math.floor(r/4294967296),c=4294967295&r,d[o>>>5]|=128<<24-o%32,d[14+(o+64>>>9<<4)]=i,d[15+(o+64>>>9<<4)]=c,t=n(d,t),a.sha1_hash=Crypto.util.bytesToHex(Crypto.util.wordsToBytes(t)),console.log(a.sha1_hash),g=a.sha1_hash):(t=n(d,t),e(a,s+=1048576,l+=1048576))};var c=a.slice(s,l);i.readAsArrayBuffer(c)}(e,0,1048576)}var v=function(t){function n(){var t,a;Object(o.a)(this,n);for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];return(a=Object(s.a)(this,(t=Object(i.a)(n)).call.apply(t,[this].concat(c)))).state={ipfsHash:null,sha1:"",getIPFShash:"",buffer:"",ethAddress:"",blockNumber:"",transactionHash:"",gasUsed:"",url:"",fileName:"",appName:"",version:0,txReceipt:""},a.captureFile=function(e){var t,n;return r.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:e.stopPropagation(),e.preventDefault(),b(t=e.target.files[0]),(n=new window.FileReader).readAsArrayBuffer(t),n.onloadend=function(){return a.convertToBuffer(n)};case 7:case"end":return r.stop()}}))},a.convertToBuffer=function(t){var n;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,r.a.awrap(e.from(t.result));case 2:n=o.sent,a.setState({buffer:n});case 4:case"end":return o.stop()}}))},a.onClick=function(){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a.setState({blockNumber:"waiting.."}),a.setState({gasUsed:"waiting..."}),e.next=5,r.a.awrap(m.a.eth.getTransactionReceipt(a.state.transactionHash,(function(e,t){console.log(e,t),a.setState({txReceipt:t})})));case 5:return e.next=7,r.a.awrap(a.setState({blockNumber:a.state.txReceipt.blockNumber}));case 7:return e.next=9,r.a.awrap(a.setState({gasUsed:a.state.txReceipt.gasUsed}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),null,null,[[0,11]])},a.handleGetUrl=function(e){a.setState({url:e.target.value})},a.handleGetFileName=function(e){a.setState({fileName:e.target.value})},a.handleGetAppName=function(e){a.setState({appName:e.target.value})},a.handleGetVersion=function(e){a.setState({version:e.target.value})},a.Downlaod=function(e){var t;return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:(t=document.createElement("a")).href=a.state.url,document.body.appendChild(t),t.click(),document.body.removeChild(t);case 5:case"end":return e.stop()}}))},a.IPFSDownlaod=function(e){return r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("\u5f00\u59cb\u4e0b\u8f7d"),console.log("name: "+a.state.appName),console.log("version: "+a.state.version),y.a.methods.getAppHash(a.state.appName,a.state.version).call().then((function(e){a.setState({getIPFShash:e})})),setTimeout((function(){console.log(a.state.getIPFShash),f.a.cat(a.state.getIPFShash).then((function(e){console.log(e);var t=new Blob([new Uint8Array(e)]);console.log(t);var n=document.createElement("a");n.download=+new Date+".apk",n.style.display="none",n.href=URL.createObjectURL(t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}))}),2e3);case 5:case"end":return e.stop()}}))},a.onSubmit=function(e){var t,n;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e.preventDefault(),a.setState({sha1:g}),o.next=4,r.a.awrap(m.a.eth.getAccounts());case 4:return t=o.sent,console.log("Sending from Metamask account: "+t[0]),o.next=8,r.a.awrap(y.a.options.address);case 8:return n=o.sent,a.setState({ethAddress:n}),o.next=12,r.a.awrap(f.a.add(a.state.buffer,(function(e,n){console.log(e,n),a.setState({ipfsHash:n[0].hash}),y.a.methods.storeApp(a.state.ipfsHash,a.state.fileName,a.state.sha1).send({from:t[0]},(function(e,t){console.log(t),a.setState({transactionHash:t})}))})));case 12:case"end":return o.stop()}}))},a}return Object(c.a)(n,t),Object(l.a)(n,[{key:"render",value:function(){return p.a.createElement("div",{className:"App"},p.a.createElement("header",{className:"App-header"},p.a.createElement("h1",null," APK Chain"),p.a.createElement("h3",null,"A Blockchain Based Android Application Market")),p.a.createElement("hr",null),p.a.createElement(h.a,null,p.a.createElement("h2",null,p.a.createElement("b",null," Download APP With Resource URL ")),p.a.createElement("br",null),p.a.createElement("label",{for:"URL"},"URL"),p.a.createElement("input",{type:"text",id:"URL",placeholder:"Please enter url here",value:this.state.url,onChange:this.handleGetUrl,style:{marginRight:"3%",marginLeft:"1%",borderRadius:5,borderWidth:1,padding:5,borderStyle:"solid",borderColor:"#797D7F"}}),p.a.createElement(d.a,{onClick:this.Downlaod},"Download APK"),p.a.createElement("hr",null),p.a.createElement("h2",null,p.a.createElement("b",null," Choose File to Send to IPFS ")),p.a.createElement("br",null),p.a.createElement("label",{for:"Name"},"App Name"),p.a.createElement("input",{type:"text",id:"Name",placeholder:"Please enter app name here",value:this.state.fileName,onChange:this.handleGetFileName,style:{marginRight:"3%",marginLeft:"1%",borderRadius:5,borderWidth:1,width:"20%",paddingTop:5,paddingBottom:5,borderStyle:"solid",borderColor:"#797D7F"}}),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement(d.b,{onSubmit:this.onSubmit},p.a.createElement("input",{type:"file",id:"APK",onChange:this.captureFile,style:{marginLeft:"42%"}}),p.a.createElement("br",null),p.a.createElement(d.a,{type:"submit"},"Send It to IPFS")),p.a.createElement("hr",null),p.a.createElement("h2",null,p.a.createElement("b",null," Download APP from IPFS ")),p.a.createElement("br",null),p.a.createElement("label",{for:"AppName"},"App Name"),p.a.createElement("input",{type:"text",id:"AppName",placeholder:"Please enter app name here",value:this.state.appName,onChange:this.handleGetAppName,style:{marginRight:"3%",marginLeft:"1%",borderRadius:5,borderWidth:1,padding:5,borderStyle:"solid",borderColor:"#797D7F"}}),p.a.createElement("label",{for:"version"},"Version"),p.a.createElement("input",{type:"number",id:"version",placeholder:"Please enter version here",value:this.state.version,onChange:this.handleGetVersion,style:{marginRight:"3%",marginLeft:"1%",borderRadius:5,borderWidth:1,padding:5,borderStyle:"solid",borderColor:"#797D7F"}}),p.a.createElement("br",null),p.a.createElement("br",null),p.a.createElement(d.a,{onClick:this.IPFSDownlaod},"Download APK from IPFS"),p.a.createElement("hr",null),p.a.createElement(d.a,{bsStyle:"info",onClick:this.onClick}," Get Transaction Receipt "),p.a.createElement(d.c,{bordered:!0,responsive:!0},p.a.createElement("thead",null,p.a.createElement("tr",null,p.a.createElement("th",null,"Tx Receipt Category"),p.a.createElement("th",null,"Values"))),p.a.createElement("tbody",null,p.a.createElement("tr",null,p.a.createElement("td",null,"IPFS Hash # stored on Eth Contract"),p.a.createElement("td",null,this.state.ipfsHash)),p.a.createElement("tr",null,p.a.createElement("td",null,"Ethereum Contract Address"),p.a.createElement("td",null,this.state.ethAddress)),p.a.createElement("tr",null,p.a.createElement("td",null,"Tx Hash # "),p.a.createElement("td",null,this.state.transactionHash)),p.a.createElement("tr",null,p.a.createElement("td",null,"Block Number # "),p.a.createElement("td",null,this.state.blockNumber)),p.a.createElement("tr",null,p.a.createElement("td",null,"Gas Used"),p.a.createElement("td",null,this.state.gasUsed)),p.a.createElement("tr",null,p.a.createElement("td",null,"sha1"),p.a.createElement("td",null,this.state.sha1))))))}}]),n}(u.Component);t.a=v}).call(this,n(8).Buffer)},410:function(e,t,n){e.exports=n(1014)},415:function(e,t,n){},498:function(e,t,n){},506:function(e,t){},527:function(e,t){},529:function(e,t){},568:function(e,t){},570:function(e,t){},599:function(e,t){},794:function(e,t){},823:function(e,t){},825:function(e,t){}},[[410,1,2]]]);
//# sourceMappingURL=main.8fdec65b.chunk.js.map